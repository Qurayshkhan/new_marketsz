import{s as W,x as i,g as n,o as r,a as f,w as h,b as e,n as N,F as p,r as x,d as H,t as a,T as K,i as b,f as _,e as X,y as U}from"./app-N67mtjSB.js";import Y from"./Report-C8H0meWg.js";import{_ as Z}from"./TextInput-WW4oPl9j.js";import{D as ee,_ as R}from"./Modal-Bc4MgvdM.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AuthenticatedLayout-DZHg2YFR.js";const se={class:"grid grid-cols-12 gap-4"},le={class:"col-span-9"},oe={class:"w-full border text-center data-table text-sm"},ae={class:"uppercase bg-gray-100"},ne=["onClick"],re=["onClick"],de={key:0,class:"bg-gray-50"},ie={colspan:"5",class:"text-left px-5"},ue={class:"w-full my-5"},ce={class:"flex items-center justify-between"},pe={class:"flex flex-col items-start"},ve=["onClick"],fe={class:"text-lg"},ge={key:0},ye={colspan:"5"},me={class:"flex items-center justify-between"},he={colspan:"5"},xe={class:"my-2 w-full"},be={key:0},_e={class:"my-2 flex gap-2 items-center"},we={class:""},ke={class:"text-red-500"},Ce={colspan:"5"},Se={class:"flex items-center justify-between w-full"},Pe={class:"w-full"},De={class:"relative w-full max-w-md"},Ie={class:"block truncate"},Ue={key:0,class:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-sm ring-1 ring-black ring-opacity-5 overflow-auto"},Fe=["onClick"],Me={class:"flex justify-between font-medium"},Te={class:"text-primary-500 fw-bold"},$e={class:"text-primary-600"},Ae={class:"text-gray-500 text-xs mt-1"},je=["disabled","onClick"],Ne={class:"p-6 space-y-4"},Re={key:0,class:"mt-4"},Ve={class:"list-disc pl-5 text-sm text-gray-700 space-y-1"},qe={class:"flex justify-end gap-2"},ze={class:"p-6 space-y-4"},Be={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},Oe=["src"],Ee={__name:"ActionRequired",props:{actions:Object,specialRequests:Object},setup(V){const c=V,g=W(),w=c.actions,u=i(new Set),F=i(null),k=i(!1),C=i(!1),S=i(!1),P=i(!1),y=i(null),m=i([]),M=i(null),D=i(!1),I=i([]),q=o=>{u.value.has(o)?u.value.delete(o):u.value.add(o)},z=()=>{u.value.size===w.length?u.value.clear():u.value=new Set(w.map(o=>o.id))},B=()=>u.value.size===w.length,T=()=>{k.value=!k.value},O=o=>{F.value=o,k.value=!1},$=()=>{C.value=!C.value},v=()=>{S.value=!1,P.value=!1,m.value=[],I.value=[]},A=o=>{M.value=o,S.value=!0},E=o=>{m.value=Array.from(o.target.files)},G=async()=>{var t,l;D.value=!0;const o=new FormData;m.value.forEach(d=>o.append("invoices[]",d)),o.append("package_id",M.value),o.append("status",2);try{const d=await U.post(route("customers.packageUploadInvoices"),o,{headers:{"Content-Type":"multipart/form-data"}});g.success(d.data.message||"Invoices uploaded successfully"),v(),setTimeout(()=>{window.location.reload()},1e3)}catch(d){g.error(((l=(t=d.response)==null?void 0:t.data)==null?void 0:l.message)||"Failed to upload invoices")}finally{D.value=!1}close()},J=async(o,t)=>{o.preventDefault();try{const l=await U.post(route("customer.packageAddNote"),{note:y.value,id:t});C.value=!1,g.success(l.data.message)}catch{g.error(response.data.message)}},L=async o=>{try{const t=await U.get(route("customers.packageGetPhotos",{package_id:o}));I.value=t.data.data||[],P.value=!0}catch{g.error("Failed to fetch photos")}};return(o,t)=>(r(),n(p,null,[f(Y,{actionCount:c==null?void 0:c.actions},{default:h(()=>[e("div",se,[e("div",le,[e("table",oe,[e("thead",ae,[e("tr",null,[e("th",null,[e("i",{onClick:z,class:N(["cursor-pointer",["fa-solid",B()?"fa-angles-down":"fa-angles-right","text-primary-500"]])},null,2)]),t[6]||(t[6]=e("th",null,"From",-1)),t[7]||(t[7]=e("th",null,"Package ID",-1)),t[8]||(t[8]=e("th",null,"Date Received",-1)),t[9]||(t[9]=e("th",{class:"bg-primary-500 text-white"}," Action Required ",-1))])]),e("tbody",null,[(r(!0),n(p,null,x(H(w),l=>(r(),n(p,{key:l.id},[e("tr",null,[e("td",{onClick:d=>q(l.id),class:"cursor-pointer"},[e("i",{class:N(["fas",u.value.has(l.id)?"fa-chevron-down":"fa-chevron-right","text-primary-500"])},null,2)],8,ne),e("td",null,a(l.from),1),e("td",null,a(l.package_id),1),e("td",null,a(o.__format_date_time(l.date_received)),1),e("td",null,[e("div",null,[e("button",{class:"text-primary-500",onClick:d=>A(l.id)}," Upload Merchant Invoice ",8,re),t[10]||(t[10]=e("p",null,"As required by Customs",-1))])])]),f(K,{name:"fade"},{default:h(()=>{var d,j;return[u.value.has(l.id)?(r(),n("tr",de,[e("td",ie,[t[23]||(t[23]=e("div",null,[e("strong",null,"Upload Merchant Invoice"),e("p",{class:"text-sm text-gray-600"}," Please upload the merchant invoice for this package. When your invoice is successfully uploaded, your package will be placed In Review until it is verified by Marketsz "),e("hr")],-1)),e("table",ue,[e("thead",null,[e("th",null,[e("div",ce,[e("div",pe,[t[11]||(t[11]=e("p",null," Package Details ",-1)),e("p",null," To: "+a((d=l==null?void 0:l.customer)==null?void 0:d.name),1)]),e("div",null,[e("button",{class:"btn bg-white text-black",onClick:s=>L(l.id)}," Photo ",8,ve)])])]),t[12]||(t[12]=e("th",null,"Qty",-1)),t[13]||(t[13]=e("th",null,"Value Per Unit (USD)",-1)),t[14]||(t[14]=e("th",null,"Total Line Value (USD)",-1))]),e("tbody",null,[(r(!0),n(p,null,x(l.items,s=>(r(),n("tr",{key:s.id,class:"border bg-[#e8e7e7]"},[e("td",null,[e("p",fe,a(s==null?void 0:s.title),1),e("p",null,a(s==null?void 0:s.description),1),s!=null&&s.item_note?(r(),n("p",ge,a(s==null?void 0:s.item_note),1)):b("",!0)]),e("td",null,a(s==null?void 0:s.quantity),1),e("td",null,a(s==null?void 0:s.value_per_unit),1),e("td",null,a(s==null?void 0:s.total_line_value),1)]))),128)),e("tr",null,[e("td",ye,[e("div",me,[e("p",null,[t[15]||(t[15]=e("span",{class:"uppercase"},"Total weight: ",-1)),_(a(l==null?void 0:l.weight)+" lbs ",1)]),e("p",null,[t[16]||(t[16]=e("span",{class:"uppercase"},"Total value of this package: ",-1)),_(a(l.total_value)+" USD ",1)])])])]),e("tr",null,[e("td",he,[e("div",xe,[e("a",{onClick:t[0]||(t[0]=s=>$()),href:"#",class:"text-red-700"},"Add your notes"),t[17]||(t[17]=_(" to this package, this is for your use only, Marketsz will not review this area. "))]),C.value?(r(),n("div",be,[f(Z,{class:"w-full",placeholder:"Please add note here",modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=s=>y.value=s)},null,8,["modelValue"]),e("div",_e,[f(ee,{onClick:X(s=>J(s,l.id),["prevent"])},{default:h(()=>t[18]||(t[18]=[_(" Save your note ")])),_:2,__:[18]},1032,["onClick"]),e("a",{onClick:t[2]||(t[2]=s=>$()),href:"javascript:void(0)"},"Cancel")])])):b("",!0),e("p",we,[t[19]||(t[19]=_(" Note: ")),e("span",ke,a(y.value?y.value:l==null?void 0:l.note),1)]),t[20]||(t[20]=e("hr",null,null,-1))])]),e("tr",null,[e("td",Ce,[e("div",Se,[e("div",Pe,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Optional Services",-1)),e("div",De,[e("button",{type:"button",class:"w-full border border-gray-300 bg-white rounded-md shadow-sm pl-4 pr-10 py-2 text-left cursor-pointer focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 text-sm",onClick:t[3]||(t[3]=(...s)=>T&&T(...s))},[e("span",Ie,a(((j=F.value)==null?void 0:j.title)||"Select Optional Service"),1),t[21]||(t[21]=e("span",{class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},[e("i",{class:"fa fa-chevron-down text-gray-400"})],-1))]),k.value?(r(),n("ul",Ue,[(r(!0),n(p,null,x(c==null?void 0:c.specialRequests,(s,Q)=>(r(),n("li",{key:Q,class:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:Ge=>O(s)},[e("div",Me,[e("span",Te,a(s.title),1),e("span",$e,"$"+a(s.price),1)]),e("p",Ae,a(s.description),1)],8,Fe))),128))])):b("",!0)])]),e("button",{disabled:D.value,type:"button",class:"btn btn-big mt-4 bg-primary-600 text-white hover:bg-primary-700 disabled:bg-primary-400",onClick:s=>A(l.id)}," Upload Invoice ",8,je)])])])])])])])):b("",!0)]}),_:2},1024)],64))),128))])])]),t[24]||(t[24]=e("div",{class:"col-span-3 bg-gray-50 p-4 rounded"},[e("p",null,"All values are in United States dollars (USD).")],-1))])]),_:1},8,["actionCount"]),f(R,{show:S.value,onClose:v},{default:h(()=>[e("div",Ne,[e("div",{class:"flex justify-between items-center"},[t[25]||(t[25]=e("h2",{class:"text-lg font-semibold text-gray-900"}," Upload Merchant Invoice ",-1)),e("button",{onClick:v,class:"text-gray-500 hover:text-gray-800"}," Close ")]),e("div",null,[e("input",{type:"file",multiple:"",onChange:t[4]||(t[4]=l=>E(l))},null,32),t[26]||(t[26]=e("p",{class:"text-sm text-gray-600 mt-1"}," Accepted File Types: BMP, JPG, JPEG, GIF, TIF, TIFF, PDF ",-1)),t[27]||(t[27]=e("p",{class:"text-sm text-gray-600"},"Max File Size: 2MB",-1))]),m.value.length?(r(),n("div",Re,[t[28]||(t[28]=e("p",{class:"font-medium text-sm mb-1"},"Selected Files:",-1)),e("ul",Ve,[(r(!0),n(p,null,x(m.value,(l,d)=>(r(),n("li",{key:d},a(l.name),1))),128))])])):b("",!0),e("div",qe,[e("button",{onClick:t[5]||(t[5]=l=>v()),class:"px-4 py-2 text-sm text-gray-700 border"}," Cancel "),e("button",{onClick:G,class:"px-4 py-2 text-sm bg-primary-600 text-white"}," Upload Document ")])])]),_:1},8,["show"]),f(R,{show:P.value,onClose:v},{default:h(()=>[e("div",ze,[e("div",{class:"flex justify-between items-center"},[t[29]||(t[29]=e("h2",{class:"text-lg font-semibold text-gray-900"}," Package Photos ",-1)),e("button",{onClick:v,class:"text-gray-500 hover:text-gray-800"}," Close ")]),e("div",Be,[(r(!0),n(p,null,x(I.value,(l,d)=>(r(),n("img",{key:d,src:l.file_with_url,alt:"Package Photo",class:"rounded shadow border"},null,8,Oe))),128))])])]),_:1},8,["show"])],64))}},Xe=te(Ee,[["__scopeId","data-v-a132ec82"]]);export{Xe as default};
