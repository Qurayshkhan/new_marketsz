import{s as E,x as i,g as a,o as r,a as g,w as h,b as e,n as A,F as c,r as k,d as G,t as n,T as J,i as y,f as m,e as L,y as $}from"./app-D5BSi3jB.js";import Q from"./Report-BV344OnI.js";import{_ as W}from"./TextInput-5t3vOx8b.js";import{D as H,_ as K}from"./Modal-B4hdTHHZ.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AuthenticatedLayout-RtqwcW7O.js";const Y={class:"grid grid-cols-12 gap-4"},Z={class:"col-span-9"},ee={class:"w-full border text-center data-table text-sm"},te={class:"uppercase bg-gray-100"},se=["onClick"],le=["onClick"],oe={key:0,class:"bg-gray-50"},ne={colspan:"5",class:"text-left px-5"},ae={class:"w-full my-5"},re={class:"flex items-center justify-between"},de={class:"flex flex-col items-start"},ue={class:"text-lg"},ie={key:0},pe={colspan:"5"},ce={class:"flex items-center justify-between"},ve={colspan:"5"},fe={class:"my-2 w-full"},ge={key:0},ye={class:"my-2 flex gap-2 items-center"},me={class:""},xe={class:"text-red-500"},be={colspan:"5"},we={class:"flex items-center justify-between w-full"},_e={class:"w-full"},he={class:"relative w-full max-w-md"},ke={class:"block truncate"},Ce={key:0,class:"absolute z-10 mt-1 w-full bg-white shadow-lg max-h-60 rounded-md py-1 text-sm ring-1 ring-black ring-opacity-5 overflow-auto"},Se=["onClick"],De={class:"flex justify-between font-medium"},Ie={class:"text-primary-500 fw-bold"},Ue={class:"text-primary-600"},Fe={class:"text-gray-500 text-xs mt-1"},Me=["onClick"],Te={class:"p-6 space-y-4"},Ae={key:0,class:"mt-4"},$e={class:"list-disc pl-5 text-sm text-gray-700 space-y-1"},Ne={class:"flex justify-end gap-2"},Pe={__name:"ActionRequired",props:{actions:Object,specialRequests:Object},setup(N){const p=N,x=E(),b=p.actions,u=i(new Set),D=i(null),w=i(!1),_=i(!1),C=i(!1),v=i(null),f=i([]),I=i(null),P=o=>{u.value.has(o)?u.value.delete(o):u.value.add(o)},j=()=>{u.value.size===b.length?u.value.clear():u.value=new Set(b.map(o=>o.id))},R=()=>u.value.size===b.length,U=()=>{w.value=!w.value},V=o=>{D.value=o,w.value=!1},F=()=>{_.value=!_.value},S=()=>{C.value=!1,f.value=[]},M=o=>{I.value=o,C.value=!0},q=o=>{f.value=Array.from(o.target.files)},z=async()=>{var t,l;const o=new FormData;f.value.forEach(d=>o.append("invoices[]",d)),o.append("package_id",I.value),o.append("status",2);try{const d=await $.post(route("customers.packageUploadInvoices"),o,{headers:{"Content-Type":"multipart/form-data"}});x.success(d.data.message||"Invoices uploaded successfully")}catch(d){x.error(((l=(t=d.response)==null?void 0:t.data)==null?void 0:l.message)||"Failed to upload invoices")}close()},B=async(o,t)=>{o.preventDefault();try{const l=await $.post(route("customer.packageAddNote"),{note:v.value,id:t});_.value=!1,x.success(l.data.message)}catch{x.error(response.data.message)}};return(o,t)=>(r(),a(c,null,[g(Q,{actionCount:p==null?void 0:p.actions},{default:h(()=>[e("div",Y,[e("div",Z,[e("table",ee,[e("thead",te,[e("tr",null,[e("th",null,[e("i",{onClick:j,class:A(["cursor-pointer",["fa-solid",R()?"fa-angles-down":"fa-angles-right","text-primary-500"]])},null,2)]),t[6]||(t[6]=e("th",null,"From",-1)),t[7]||(t[7]=e("th",null,"Package ID",-1)),t[8]||(t[8]=e("th",null,"Date Received",-1)),t[9]||(t[9]=e("th",{class:"bg-primary-500 text-white"}," Action Required ",-1))])]),e("tbody",null,[(r(!0),a(c,null,k(G(b),l=>(r(),a(c,{key:l.id},[e("tr",null,[e("td",{onClick:d=>P(l.id),class:"cursor-pointer"},[e("i",{class:A(["fas",u.value.has(l.id)?"fa-chevron-down":"fa-chevron-right","text-primary-500"])},null,2)],8,se),e("td",null,n(l.from),1),e("td",null,n(l.package_id),1),e("td",null,n(o.__format_date_time(l.date_received)),1),e("td",null,[e("div",null,[e("button",{class:"text-primary-500",onClick:d=>M(l.id)}," Upload Merchant Invoice ",8,le),t[10]||(t[10]=e("p",null,"As required by Customs",-1))])])]),g(J,{name:"fade"},{default:h(()=>{var d,T;return[u.value.has(l.id)?(r(),a("tr",oe,[e("td",ne,[t[24]||(t[24]=e("div",null,[e("strong",null,"Upload Merchant Invoice"),e("p",{class:"text-sm text-gray-600"}," Please upload the merchant invoice for this package. When your invoice is successfully uploaded, your package will be placed In Review until it is verified by Marketsz "),e("hr")],-1)),e("table",ae,[e("thead",null,[e("th",null,[e("div",re,[e("div",de,[t[11]||(t[11]=e("p",null," Package Details ",-1)),e("p",null," To: "+n((d=l==null?void 0:l.customer)==null?void 0:d.name),1)]),t[12]||(t[12]=e("div",null,[e("button",{class:"btn bg-white text-black"}," Photo ")],-1))])]),t[13]||(t[13]=e("th",null,"Qty",-1)),t[14]||(t[14]=e("th",null,"Value Per Unit (USD)",-1)),t[15]||(t[15]=e("th",null,"Total Line Value (USD)",-1))]),e("tbody",null,[(r(!0),a(c,null,k(l.items,s=>(r(),a("tr",{key:s.id,class:"border bg-[#e8e7e7]"},[e("td",null,[e("p",ue,n(s==null?void 0:s.title),1),e("p",null,n(s==null?void 0:s.description),1),s!=null&&s.item_note?(r(),a("p",ie,n(s==null?void 0:s.item_note),1)):y("",!0)]),e("td",null,n(s==null?void 0:s.quantity),1),e("td",null,n(s==null?void 0:s.value_per_unit),1),e("td",null,n(s==null?void 0:s.total_line_value),1)]))),128)),e("tr",null,[e("td",pe,[e("div",ce,[e("p",null,[t[16]||(t[16]=e("span",{class:"uppercase"},"Total weight: ",-1)),m(n(l==null?void 0:l.weight)+" lbs ",1)]),e("p",null,[t[17]||(t[17]=e("span",{class:"uppercase"},"Total value of this package: ",-1)),m(n(l.total_value)+" USD ",1)])])])]),e("tr",null,[e("td",ve,[e("div",fe,[e("a",{onClick:t[0]||(t[0]=s=>F()),href:"#",class:"text-red-700"},"Add your notes"),t[18]||(t[18]=m(" to this package, this is for your use only, Marketsz will not review this area. "))]),_.value?(r(),a("div",ge,[g(W,{class:"w-full",placeholder:"Please add note here",modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s)},null,8,["modelValue"]),e("div",ye,[g(H,{onClick:L(s=>B(s,l.id),["prevent"])},{default:h(()=>t[19]||(t[19]=[m(" Save your note ")])),_:2,__:[19]},1032,["onClick"]),e("a",{onClick:t[2]||(t[2]=s=>F()),href:"javascript:void(0)"},"Cancel")])])):y("",!0),e("p",me,[t[20]||(t[20]=m(" Note: ")),e("span",xe,n(v.value?v.value:l==null?void 0:l.note),1)]),t[21]||(t[21]=e("hr",null,null,-1))])]),e("tr",null,[e("td",be,[e("div",we,[e("div",_e,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Optional Services",-1)),e("div",he,[e("button",{type:"button",class:"w-full border border-gray-300 bg-white rounded-md shadow-sm pl-4 pr-10 py-2 text-left cursor-pointer focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500 text-sm",onClick:t[3]||(t[3]=(...s)=>U&&U(...s))},[e("span",ke,n(((T=D.value)==null?void 0:T.title)||"Select Optional Service"),1),t[22]||(t[22]=e("span",{class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},[e("i",{class:"fa fa-chevron-down text-gray-400"})],-1))]),w.value?(r(),a("ul",Ce,[(r(!0),a(c,null,k(p==null?void 0:p.specialRequests,(s,O)=>(r(),a("li",{key:O,class:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onClick:je=>V(s)},[e("div",De,[e("span",Ie,n(s.title),1),e("span",Ue,"$"+n(s.price),1)]),e("p",Fe,n(s.description),1)],8,Se))),128))])):y("",!0)])]),e("button",{type:"button",class:"btn btn-big mt-4 bg-primary-600 text-white hover:bg-primary-700",onClick:s=>M(l.id)}," Upload Invoice ",8,Me)])])])])])])])):y("",!0)]}),_:2},1024)],64))),128))])])]),t[25]||(t[25]=e("div",{class:"col-span-3 bg-gray-50 p-4 rounded"},[e("p",null,"All values are in United States dollars (USD).")],-1))])]),_:1},8,["actionCount"]),g(K,{show:C.value,onClose:S},{default:h(()=>[e("div",Te,[e("div",{class:"flex justify-between items-center"},[t[26]||(t[26]=e("h2",{class:"text-lg font-semibold text-gray-900"}," Upload Merchant Invoice ",-1)),e("button",{onClick:S,class:"text-gray-500 hover:text-gray-800"}," Close ")]),e("div",null,[e("input",{type:"file",multiple:"",onChange:t[4]||(t[4]=l=>q(l))},null,32),t[27]||(t[27]=e("p",{class:"text-sm text-gray-600 mt-1"}," Accepted File Types: BMP, JPG, JPEG, GIF, TIF, TIFF, PDF ",-1)),t[28]||(t[28]=e("p",{class:"text-sm text-gray-600"},"Max File Size: 2MB",-1))]),f.value.length?(r(),a("div",Ae,[t[29]||(t[29]=e("p",{class:"font-medium text-sm mb-1"},"Selected Files:",-1)),e("ul",$e,[(r(!0),a(c,null,k(f.value,(l,d)=>(r(),a("li",{key:d},n(l.name),1))),128))])])):y("",!0),e("div",Ne,[e("button",{onClick:t[5]||(t[5]=l=>S()),class:"px-4 py-2 text-sm text-gray-700 border"}," Cancel "),e("button",{onClick:z,class:"px-4 py-2 text-sm bg-primary-600 text-white"}," Upload Document ")])])]),_:1},8,["show"])],64))}},Ee=X(Pe,[["__scopeId","data-v-d2e8e6d3"]]);export{Ee as default};
