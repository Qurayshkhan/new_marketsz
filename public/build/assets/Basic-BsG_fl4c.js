import{u as q,D as $,E as D,c as N,o as p,w as f,b as s,e as y,a as l,d as a,g as c,F as b,r as w,f as v,i as T}from"./app-wByYwQey.js";import I from"./Edit-CzMq-c_o.js";import{_ as u}from"./InputLabel-CiolX6HG.js";import{_ as h}from"./PrimaryButton-D2K8pNfH.js";import{_ as m}from"./TextInput-BZESZU_S.js";import{Q as M,C as U}from"./vue-select.es-Bvx2UG8_.js";import{_}from"./InputError-CuezX2yb.js";import W from"./Delete-h44uQG68.js";import"./NavLink-zBMiMvXw.js";import"./AuthenticatedLayout-ClrPs3MA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DangerButton-CAN3bnvK.js";import"./SecondaryButton-BoBgRReK.js";import"./Modal-BWG6rHcy.js";const A=[{id:1,name:"Action Required"},{id:2,name:"In Review"},{id:3,name:"Ready to send"},{id:4,name:"Consolidate"}],B={class:"card"},E={class:"card-body grid grid-cols-2 gap-6"},R={class:""},O={class:""},j={class:"col-span-2"},L={class:"col-span-2"},Q={class:"py-4 grid sm:text-center sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},z=["src"],J={class:"col-span-2 mt-4"},K={class:"mt-2 text-end"},G={class:"col-span-2"},H={class:"col-span-full text-right"},X=["onClick"],Y={class:""},Z={class:""},P={class:"col-span-2 text-end flex items-center justify-end gap-2"},_e={__name:"Basic",props:{package:Object,customers:Object},setup(k){const g=k,r=g.package,o=q({from:r==null?void 0:r.from,date:new Date(r==null?void 0:r.date_received),sender_id:r==null?void 0:r.sender_id,status:r==null?void 0:r.status,files:[],items:(r==null?void 0:r.items)??[{title:"",description:"",item_note:"",quantity:1,value_per_unit:0,total_line_value:0,total_line_weight:0}],totalPrice:0,totalWeight:0,tracking_no:r==null?void 0:r.tracking_id}),V=()=>{o.items.forEach(n=>{n.total_line_value=parseFloat((n.quantity*n.value_per_unit).toFixed(2))}),o.totalPrice=parseFloat(o.items.reduce((n,e)=>n+(e.total_line_value||0),0).toFixed(2)),o.totalWeight=parseFloat(o.items.reduce((n,e)=>n+(e.total_line_weight||0),0).toFixed(2))};$(()=>o.items,()=>{V()},{deep:!0});const x=()=>{o.items.push({title:"",description:"",item_note:"",quantity:1,value_per_unit:0,total_line_value:0,total_line_weight:0})},F=n=>{o.items.length>1&&o.items.splice(n,1)},S=n=>{o.files=Array.from(n.target.files)},C=()=>{o.date=new Date(o.date).toLocaleString("en-US"),o.transform(n=>{const e=new FormData;e.append("id",r.id),e.append("from",n.from),e.append("date_received",n.date),e.append("sender_id",n.sender_id),e.append("total_value",n.totalPrice),e.append("weight",n.totalWeight),e.append("tracking_id",n.tracking_no),e.append("status",n.status);const t=n.items.map(i=>({...i,total_line_value:parseFloat((i.quantity*i.value_per_unit).toFixed(2))}));return e.append("items",JSON.stringify(t)),n.files.forEach((i,d)=>{e.append(`files[${d}]`,i)}),e}).post(route("admin.packages.store"),{preserveScroll:!0,onSuccess:()=>console.log("OK")})};return D(()=>{V()}),(n,e)=>(p(),N(I,{package:g.package},{default:f(()=>[s("form",{onSubmit:y(C,["prevent"]),enctype:"multipart/form-data"},[s("div",B,[s("div",E,[s("div",null,[l(u,{for:"from",value:"From"}),l(m,{id:"from",modelValue:a(o).from,"onUpdate:modelValue":e[0]||(e[0]=t=>a(o).from=t),type:"text",placeholder:"Enter company name e.g Amazon",class:"w-full"},null,8,["modelValue"]),l(_,{class:"mt-2",message:a(o).errors.from},null,8,["message"])]),s("div",null,[l(u,{for:"date",value:"Date Received"}),l(a(M),{modelValue:a(o).date,"onUpdate:modelValue":e[1]||(e[1]=t=>a(o).date=t),class:"w-full rounded-md text-black border-gray-300 shadow-sm"},null,8,["modelValue"]),l(_,{class:"mt-2",message:a(o).errors.date},null,8,["message"])]),s("div",R,[l(u,{value:"Tracking No"}),l(m,{type:"text",modelValue:a(o).tracking_no,"onUpdate:modelValue":e[2]||(e[2]=t=>a(o).tracking_no=t),class:"w-full"},null,8,["modelValue"]),l(_,{class:"mt-2",message:a(o).errors.tracking_no},null,8,["message"])]),s("div",O,[l(u,{id:"packageStatus",value:"Status"}),l(a(U),{id:"packageStatus",options:a(A),reduce:t=>t.id,label:"name",modelValue:a(o).status,"onUpdate:modelValue":e[3]||(e[3]=t=>a(o).status=t)},null,8,["options","reduce","modelValue"]),l(_,{class:"mt-2",message:a(o).errors.tracking_no},null,8,["message"])]),e[10]||(e[10]=s("div",{class:"col-span-2 mt-4"},[s("h2",{class:"font-semibold text-lg"}," Sender Information ")],-1)),s("div",j,[l(u,{for:"sender",value:"Select Sender"}),l(a(U),{id:"sender_id",class:"mt-1 w-full",label:"name",options:g.customers,reduce:t=>t.id,modelValue:a(o).sender_id,"onUpdate:modelValue":e[4]||(e[4]=t=>a(o).sender_id=t)},null,8,["options","reduce","modelValue"]),l(_,{class:"mt-2",message:a(o).errors.sender_id},null,8,["message"])]),s("div",L,[l(u,{for:"files",value:"Upload Files"}),l(m,{type:"file",onChange:S,class:"w-full",multiple:""}),s("div",Q,[(p(!0),c(b,null,w(a(r).files,t=>(p(),c("div",{class:"w-40",key:t==null?void 0:t.id},[s("img",{src:t.file_with_url,width:"100%"},null,8,z)]))),128))])]),s("div",J,[e[7]||(e[7]=s("h2",{class:"font-semibold text-lg"},"Add package items",-1)),s("div",K,[l(h,{type:"button",onClick:x,class:"bg-green-600 hover:bg-green-700"},{default:f(()=>e[6]||(e[6]=[v(" + Add More Items ")])),_:1,__:[6]})])]),s("div",G,[(p(!0),c(b,null,w(a(o).items,(t,i)=>(p(),c("div",{key:i,class:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4 border p-4 rounded relative"},[s("div",H,[a(o).items.length>1?(p(),c("button",{key:0,type:"button",onClick:d=>F(i),class:"text-red-600 text-sm absolute top-2 right-2"}," Remove ",8,X)):T("",!0)]),s("div",null,[l(u,{for:"title"+i,value:"Title"},null,8,["for"]),l(m,{modelValue:t.title,"onUpdate:modelValue":d=>t.title=d,type:"text",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",null,[l(u,{for:"description"+i,value:"Description"},null,8,["for"]),l(m,{modelValue:t.description,"onUpdate:modelValue":d=>t.description=d,type:"text",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",null,[l(u,{for:"note"+i,value:"Note"},null,8,["for"]),l(m,{modelValue:t.item_note,"onUpdate:modelValue":d=>t.item_note=d,type:"text",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",null,[l(u,{for:"quantity"+i,value:"Quantity"},null,8,["for"]),l(m,{modelValue:t.quantity,"onUpdate:modelValue":d=>t.quantity=d,modelModifiers:{number:!0},type:"number",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",null,[l(u,{for:"valuePerUnit"+i,value:"Value per unit"},null,8,["for"]),l(m,{modelValue:t.value_per_unit,"onUpdate:modelValue":d=>t.value_per_unit=d,modelModifiers:{number:!0},type:"number",class:"w-full",step:"any"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",null,[l(u,{for:"totalLineValue"+i,value:"Total line value"},null,8,["for"]),l(m,{modelValue:t.total_line_value,"onUpdate:modelValue":d=>t.total_line_value=d,readonly:"",step:"any",class:"w-full bg-gray-200"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",null,[l(u,{for:"weight"+i,value:"Weight in lbs"},null,8,["for"]),l(m,{modelValue:t.total_line_weight,"onUpdate:modelValue":d=>t.total_line_weight=d,modelModifiers:{number:!0},type:"number",class:"w-full",step:"any"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]),s("div",Y,[l(u,{value:"Total Price"}),l(m,{value:a(o).totalPrice,readonly:"",class:"w-full bg-gray-200",step:"any"},null,8,["value"])]),s("div",Z,[l(u,{value:"Total Weight"}),l(m,{value:a(o).totalWeight,readonly:"",class:"w-full bg-gray-200",step:"any"},null,8,["value"])]),s("div",P,[l(W,{onClick:e[5]||(e[5]=y(()=>{},["prevent","stop"])),id:a(r).id},{default:f(()=>e[8]||(e[8]=[v(" Delete ")])),_:1,__:[8]},8,["id"]),l(h,{type:"submit",class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",disabled:a(o).processing},{default:f(()=>e[9]||(e[9]=[v(" Update package ")])),_:1,__:[9]},8,["disabled"])])])])],32)]),_:1},8,["package"]))}};export{_e as default};
