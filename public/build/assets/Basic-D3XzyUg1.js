import{u as S,z as q,A as N,c as T,o as p,w as _,b as a,e as y,a as l,d as n,g as c,F as b,r as w,f as v,i as $}from"./app-N67mtjSB.js";import B from"./Edit-Czeo6zrJ.js";import{_ as u}from"./InputLabel-cUDF3TT2.js";import{P as h}from"./PrimaryButton-g1DeEsEe.js";import{_ as m}from"./TextInput-WW4oPl9j.js";import{Q as D,C as M}from"./vue-select.es-C0-jAesJ.js";import{_ as f}from"./InputError-BYexnvpZ.js";import W from"./Delete-yu06XWe7.js";import"./AuthenticatedLayout-DZHg2YFR.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Modal-Bc4MgvdM.js";import"./SecondaryButton-Bd0Zpp86.js";const A={class:"card"},I={class:"card-body grid grid-cols-2 gap-6"},E={class:""},O={class:"col-span-2"},j={class:"col-span-2"},L={class:"py-4 grid sm:text-center sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3"},Q=["src"],z={class:"col-span-2 mt-4"},R={class:"mt-2 text-end"},J={class:"col-span-2"},K={class:"col-span-full text-right"},G=["onClick"],H={class:""},X={class:""},Y={class:"col-span-2 text-end flex items-center justify-end gap-2"},ue={__name:"Basic",props:{package:Object,customers:Object},setup(U){const g=U,r=g.package,o=S({from:r==null?void 0:r.from,date:new Date(r==null?void 0:r.date_received),sender_id:r==null?void 0:r.sender_id,files:[],items:(r==null?void 0:r.items)??[{title:"",description:"",item_note:"",quantity:1,value_per_unit:0,total_line_value:0,total_line_weight:0}],totalPrice:0,totalWeight:0,tracking_no:r==null?void 0:r.tracking_id}),V=()=>{o.items.forEach(s=>{s.total_line_value=parseFloat((s.quantity*s.value_per_unit).toFixed(2))}),o.totalPrice=parseFloat(o.items.reduce((s,e)=>s+(e.total_line_value||0),0).toFixed(2)),o.totalWeight=parseFloat(o.items.reduce((s,e)=>s+(e.total_line_weight||0),0).toFixed(2))};q(()=>o.items,()=>{V()},{deep:!0});const k=()=>{o.items.push({title:"",description:"",item_note:"",quantity:1,value_per_unit:0,total_line_value:0,total_line_weight:0})},x=s=>{o.items.length>1&&o.items.splice(s,1)},F=s=>{o.files=Array.from(s.target.files)},C=()=>{o.date=new Date(o.date).toLocaleString("en-US"),o.transform(s=>{const e=new FormData;e.append("id",r.id),e.append("from",s.from),e.append("date_received",s.date),e.append("sender_id",s.sender_id),e.append("total_value",s.totalPrice),e.append("weight",s.totalWeight),e.append("tracking_id",s.tracking_no);const t=s.items.map(i=>({...i,total_line_value:parseFloat((i.quantity*i.value_per_unit).toFixed(2))}));return e.append("items",JSON.stringify(t)),s.files.forEach((i,d)=>{e.append(`files[${d}]`,i)}),e}).post(route("admin.packages.store"),{preserveScroll:!0,onSuccess:()=>console.log("OK")})};return N(()=>{V()}),(s,e)=>(p(),T(B,{package:g.package},{default:_(()=>[a("form",{onSubmit:y(C,["prevent"]),enctype:"multipart/form-data"},[a("div",A,[a("div",I,[a("div",null,[l(u,{for:"from",value:"From"}),l(m,{id:"from",modelValue:n(o).from,"onUpdate:modelValue":e[0]||(e[0]=t=>n(o).from=t),type:"text",placeholder:"Enter company name e.g Amazon",class:"w-full"},null,8,["modelValue"]),l(f,{class:"mt-2",message:n(o).errors.from},null,8,["message"])]),a("div",null,[l(u,{for:"date",value:"Date Received"}),l(n(D),{modelValue:n(o).date,"onUpdate:modelValue":e[1]||(e[1]=t=>n(o).date=t),class:"w-full rounded-md text-black border-gray-300 shadow-sm"},null,8,["modelValue"]),l(f,{class:"mt-2",message:n(o).errors.date},null,8,["message"])]),a("div",E,[l(u,{value:"Tracking No"}),l(m,{type:"text",modelValue:n(o).tracking_no,"onUpdate:modelValue":e[2]||(e[2]=t=>n(o).tracking_no=t),class:"w-full"},null,8,["modelValue"]),l(f,{class:"mt-2",message:n(o).errors.tracking_no},null,8,["message"])]),e[9]||(e[9]=a("div",{class:"col-span-2 mt-4"},[a("h2",{class:"font-semibold text-lg"}," Sender Information ")],-1)),a("div",O,[l(u,{for:"sender",value:"Select Sender"}),l(n(M),{id:"sender_id",class:"mt-1 w-full",label:"name",options:g.customers,reduce:t=>t.id,modelValue:n(o).sender_id,"onUpdate:modelValue":e[3]||(e[3]=t=>n(o).sender_id=t)},null,8,["options","reduce","modelValue"]),l(f,{class:"mt-2",message:n(o).errors.sender_id},null,8,["message"])]),a("div",j,[l(u,{for:"files",value:"Upload Files"}),l(m,{type:"file",onChange:F,class:"w-full",multiple:""}),a("div",L,[(p(!0),c(b,null,w(n(r).files,t=>(p(),c("div",{class:"w-40",key:t==null?void 0:t.id},[a("img",{src:t.file_with_url,width:"100%"},null,8,Q)]))),128))])]),a("div",z,[e[6]||(e[6]=a("h2",{class:"font-semibold text-lg"},"Add package items",-1)),a("div",R,[l(h,{type:"button",onClick:k,class:"bg-green-600 hover:bg-green-700"},{default:_(()=>e[5]||(e[5]=[v(" + Add More Items ")])),_:1,__:[5]})])]),a("div",J,[(p(!0),c(b,null,w(n(o).items,(t,i)=>(p(),c("div",{key:i,class:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4 border p-4 rounded relative"},[a("div",K,[n(o).items.length>1?(p(),c("button",{key:0,type:"button",onClick:d=>x(i),class:"text-red-600 text-sm absolute top-2 right-2"}," Remove ",8,G)):$("",!0)]),a("div",null,[l(u,{for:"title"+i,value:"Title"},null,8,["for"]),l(m,{modelValue:t.title,"onUpdate:modelValue":d=>t.title=d,type:"text",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",null,[l(u,{for:"description"+i,value:"Description"},null,8,["for"]),l(m,{modelValue:t.description,"onUpdate:modelValue":d=>t.description=d,type:"text",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",null,[l(u,{for:"note"+i,value:"Note"},null,8,["for"]),l(m,{modelValue:t.item_note,"onUpdate:modelValue":d=>t.item_note=d,type:"text",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",null,[l(u,{for:"quantity"+i,value:"Quantity"},null,8,["for"]),l(m,{modelValue:t.quantity,"onUpdate:modelValue":d=>t.quantity=d,modelModifiers:{number:!0},type:"number",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",null,[l(u,{for:"valuePerUnit"+i,value:"Value per unit"},null,8,["for"]),l(m,{modelValue:t.value_per_unit,"onUpdate:modelValue":d=>t.value_per_unit=d,modelModifiers:{number:!0},type:"number",class:"w-full",step:"any"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",null,[l(u,{for:"totalLineValue"+i,value:"Total line value"},null,8,["for"]),l(m,{modelValue:t.total_line_value,"onUpdate:modelValue":d=>t.total_line_value=d,readonly:"",step:"any",class:"w-full bg-gray-200"},null,8,["modelValue","onUpdate:modelValue"])]),a("div",null,[l(u,{for:"weight"+i,value:"Weight in lbs"},null,8,["for"]),l(m,{modelValue:t.total_line_weight,"onUpdate:modelValue":d=>t.total_line_weight=d,modelModifiers:{number:!0},type:"number",class:"w-full",step:"any"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]),a("div",H,[l(u,{value:"Total Price"}),l(m,{value:n(o).totalPrice,readonly:"",class:"w-full bg-gray-200",step:"any"},null,8,["value"])]),a("div",X,[l(u,{value:"Total Weight"}),l(m,{value:n(o).totalWeight,readonly:"",class:"w-full bg-gray-200",step:"any"},null,8,["value"])]),a("div",Y,[l(W,{onClick:e[4]||(e[4]=y(()=>{},["prevent","stop"])),id:n(r).id},{default:_(()=>e[7]||(e[7]=[v(" Delete ")])),_:1,__:[7]},8,["id"]),l(h,{type:"submit",class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",disabled:n(o).processing},{default:_(()=>e[8]||(e[8]=[v(" Update package ")])),_:1,__:[8]},8,["disabled"])])])])],32)]),_:1},8,["package"]))}};export{ue as default};
