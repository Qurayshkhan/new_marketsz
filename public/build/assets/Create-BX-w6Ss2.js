import{u as C,D as P,j as V,g as m,o as p,a as e,d as s,h as q,w as _,i as b,b as t,t as N,f as g,e as $,F as h,r as A}from"./app-DkUkVBZ9.js";import{_ as d}from"./InputLabel-hVZ9tBby.js";import{_ as w}from"./PrimaryButton-zxniru5U.js";import{_ as i}from"./TextInput-phx9tQ01.js";import{_ as D}from"./AuthenticatedLayout-DvmO3E8q.js";import{Q as T,C as W}from"./vue-select.es-BSaorbMb.js";import{_ as c}from"./InputError-B2KGQUcp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={key:0,class:"mb-4 text-sm font-medium text-green-600"},M={class:"container py-8"},B={class:"card"},E={class:"card-body grid grid-cols-2 gap-6"},L={class:""},Q={class:"col-span-2"},O={class:"col-span-2"},R={class:"col-span-2 mt-4"},j={class:"mt-2 text-end"},z={class:"col-span-2"},J={class:"col-span-full text-right"},K=["onClick"],G={class:""},H={class:""},X={class:"col-span-2 text-end"},ne={__name:"Create",props:{users:Array,status:{type:String}},setup(f){const k=f,a=C({from:"",date:null,sender_id:null,files:[],items:[{title:"",description:"",item_note:"",quantity:1,value_per_unit:0,total_line_value:0,total_line_weight:0}],totalPrice:0,totalWeight:0,tracking_no:null}),U=()=>{a.items.push({title:"",description:"",item_note:"",quantity:1,value_per_unit:0,total_line_value:0,total_line_weight:0})},x=n=>{a.items.splice(n,1)};P(()=>a.items,()=>{a.totalPrice=v.value,a.totalWeight=y.value},{deep:!0});const v=V(()=>parseFloat(a.items.reduce((n,l)=>n+l.quantity*l.value_per_unit,0).toFixed(2))),y=V(()=>parseFloat(a.items.reduce((n,l)=>n+Number(l.total_line_weight||0),0).toFixed(2))),S=n=>{a.files=Array.from(n.target.files)},F=()=>{a.date=new Date(a.date).toLocaleString("en-US"),a.transform(n=>{const l=new FormData;l.append("from",n.from),l.append("date_received",n.date),l.append("sender_id",n.sender_id),l.append("total_value",n.totalPrice),l.append("weight",n.totalWeight),l.append("tracking_id",n.tracking_no);const o=n.items.map(r=>({...r,total_line_value:r.quantity*r.value_per_unit}));return l.append("items",JSON.stringify(o)),n.files.forEach((r,u)=>{l.append(`files[${u}]`,r)}),l}).post(route("admin.packages.store"),{preserveScroll:!0,onSuccess:()=>console.log("OK")})};return(n,l)=>(p(),m(h,null,[e(s(q),{title:"Create Package"}),e(D,null,{default:_(()=>[f.status?(p(),m("div",I,N(f.status),1)):b("",!0),t("div",M,[l[8]||(l[8]=t("h1",{class:"text-xl font-semibold mb-4"},[t("i",{class:"fa-solid fa-cube mr-2"}),g(" Add Package Shipment ")],-1)),t("form",{onSubmit:$(F,["prevent"]),enctype:"multipart/form-data"},[t("div",B,[t("div",E,[t("div",null,[e(d,{for:"from",value:"From"}),e(i,{id:"from",modelValue:s(a).from,"onUpdate:modelValue":l[0]||(l[0]=o=>s(a).from=o),type:"text",placeholder:"Enter company name e.g Amazon",class:"w-full"},null,8,["modelValue"]),e(c,{class:"mt-2",message:s(a).errors.from},null,8,["message"])]),t("div",null,[e(d,{for:"date",value:"Date Received"}),e(s(T),{modelValue:s(a).date,"onUpdate:modelValue":l[1]||(l[1]=o=>s(a).date=o),class:"w-full rounded-md text-black border-gray-300 shadow-sm"},null,8,["modelValue"]),e(c,{class:"mt-2",message:s(a).errors.date},null,8,["message"])]),t("div",L,[e(d,{value:"Tracking No"}),e(i,{type:"text",modelValue:s(a).tracking_no,"onUpdate:modelValue":l[2]||(l[2]=o=>s(a).tracking_no=o),class:"w-full"},null,8,["modelValue"]),e(c,{class:"mt-2",message:s(a).errors.tracking_no},null,8,["message"])]),l[7]||(l[7]=t("div",{class:"col-span-2 mt-4"},[t("h2",{class:"font-semibold text-lg"}," Sender Information ")],-1)),t("div",Q,[e(d,{for:"sender",value:"Select Sender"}),e(s(W),{id:"sender_id",class:"mt-1 w-full",label:"name",options:k.users,reduce:o=>o.id,modelValue:s(a).sender_id,"onUpdate:modelValue":l[3]||(l[3]=o=>s(a).sender_id=o)},null,8,["options","reduce","modelValue"]),e(c,{class:"mt-2",message:s(a).errors.sender_id},null,8,["message"])]),t("div",O,[e(d,{for:"files",value:"Upload Files"}),e(i,{type:"file",onChange:S,class:"w-full",multiple:""})]),t("div",R,[l[5]||(l[5]=t("h2",{class:"font-semibold text-lg"}," Add package items ",-1)),t("div",j,[e(w,{type:"button",onClick:U,class:"bg-green-600 hover:bg-green-700"},{default:_(()=>l[4]||(l[4]=[g(" + Add More Items ")])),_:1,__:[4]})])]),t("div",z,[(p(!0),m(h,null,A(s(a).items,(o,r)=>(p(),m("div",{key:r,class:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4 border p-4 rounded relative"},[t("div",J,[s(a).items.length>1?(p(),m("button",{key:0,type:"button",onClick:u=>x(r),class:"text-red-600 text-sm absolute top-2 right-2"}," Remove ",8,K)):b("",!0)]),t("div",null,[e(d,{for:"title"+r,value:"Title"},null,8,["for"]),e(i,{modelValue:o.title,"onUpdate:modelValue":u=>o.title=u,type:"text",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",null,[e(d,{for:"description"+r,value:"Description"},null,8,["for"]),e(i,{modelValue:o.description,"onUpdate:modelValue":u=>o.description=u,type:"text",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",null,[e(d,{for:"note"+r,value:"Note"},null,8,["for"]),e(i,{modelValue:o.item_note,"onUpdate:modelValue":u=>o.item_note=u,type:"text",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",null,[e(d,{for:"quantity"+r,value:"Quantity"},null,8,["for"]),e(i,{modelValue:o.quantity,"onUpdate:modelValue":u=>o.quantity=u,modelModifiers:{number:!0},type:"number",class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",null,[e(d,{for:"valuePerUnit"+r,value:"Value per unit"},null,8,["for"]),e(i,{modelValue:o.value_per_unit,"onUpdate:modelValue":u=>o.value_per_unit=u,modelModifiers:{number:!0},type:"number",class:"w-full",step:"any"},null,8,["modelValue","onUpdate:modelValue"])]),t("div",null,[e(d,{for:"totalLineValue"+r,value:"Total line value"},null,8,["for"]),e(i,{value:o.quantity*o.value_per_unit,readonly:"",step:"any",class:"w-full bg-gray-200"},null,8,["value"])]),t("div",null,[e(d,{for:"weight"+r,value:"Weight in lbs"},null,8,["for"]),e(i,{modelValue:o.total_line_weight,"onUpdate:modelValue":u=>o.total_line_weight=u,modelModifiers:{number:!0},type:"number",class:"w-full",step:"any"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]),t("div",G,[e(d,{value:"Total Price"}),e(i,{value:v.value,readonly:"",class:"w-full bg-gray-200",step:"any"},null,8,["value"])]),t("div",H,[e(d,{value:"Total Weight"}),e(i,{value:y.value,readonly:"",class:"w-full bg-gray-200",step:"any"},null,8,["value"])]),t("div",X,[e(w,{type:"submit",class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",disabled:s(a).processing},{default:_(()=>l[6]||(l[6]=[g(" Save Package ")])),_:1,__:[6]},8,["disabled"])])])])],32)])]),_:1})],64))}};export{ne as default};
