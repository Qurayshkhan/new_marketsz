import{_ as J}from"./AuthenticatedLayout-ClrPs3MA.js";import L from"./CreditCard-CpnVbbSM.js";import q from"./ShipAddress-aKgDiXpg.js";import z from"./Delete-CziWelKb.js";import{_ as R}from"./Radiobox-D3VDVS10.js";import{_ as F}from"./Checkbox-DITicMBc.js";import{C as Y,H as G,q as u,D as Q,E as X,c as Z,o as d,w as O,a,b as e,d as k,h as P,t as n,g as r,i as K,F as f,r as g,n as tt,f as y,I as et}from"./app-wByYwQey.js";import lt from"./NationalId-Dq3hWPVw.js";import st from"./Checkout-CkAPfuJK.js";import"./Modal-BWG6rHcy.js";import"./stripe.esm-Vr-Q6Y1S.js";import"./PrimaryButton-D2K8pNfH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./TextInput-BZESZU_S.js";import"./InputLabel-CiolX6HG.js";import"./InputError-CuezX2yb.js";import"./SecondaryButton-BoBgRReK.js";import"./DangerButton-CAN3bnvK.js";const nt={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 p-4"},ot={class:"lg:col-span-2"},it={class:"mb-4 text-end"},dt={class:"w-60 ml-auto"},rt={class:"flex flex-col items-center justify-between text-gray-700 mb-2"},ut={class:"mt-4 overflow-x-auto"},at={class:"min-w-full bg-white rounded-lg shadow"},mt={class:"min-w-full divide-y divide-gray-200 border text-center"},_t={key:0,class:"bg-white divide-y divide-gray-200"},ct={class:"hover:bg-gray-100"},xt={class:"px-6 py-4 whitespace-nowrap border"},bt=["onClick"],vt={class:"px-6 py-4 whitespace-nowrap border"},ft={class:"text-sm text-gray-900"},yt={class:"text-sm text-gray-500"},wt={class:"px-6 py-4 whitespace-nowrap border"},gt={class:"text-sm text-gray-900"},ht={class:"px-6 py-4 whitespace-nowrap border"},St={class:"text-sm text-gray-900"},$t={class:"px-6 py-4 whitespace-nowrap border text-center"},Ct={key:0},At={colspan:"5",class:"px-6 py-4 bg-gray-50"},Vt={class:"p-4 rounded-lg"},jt={class:"bg-primary-500 text-white text-center uppercase"},pt={class:"lg:col-span-1"},Nt={class:"bg-white rounded-lg shadow p-4"},It={class:"mb-4"},Mt={class:"flex items-center justify-between mb-4"},Dt={class:"text-gray-600"},Tt=["for"],Et={class:"ml-2"},Bt={class:"mb-4"},Ft={class:"flex items-center justify-between mb-4"},Kt={class:"text-gray-600"},Ut=["for"],Wt={class:"ml-2"},Ht={class:"mb-4"},Jt={class:"flex items-center justify-between mb-4"},Lt={class:"text-gray-600"},qt=["for"],zt={class:"ml-2"},Rt={class:"mb-4"},Yt={class:"bg-white rounded-2xl shadow-lg p-6 w-full max-w-md mx-auto"},Gt={class:"border-b pb-4 mb-4"},Qt={class:"flex items-center justify-between text-base font-semibold text-gray-700 mb-3"},Xt={class:"text-gray-800"},Zt={class:"text-center mb-4"},Ot={class:"text-2xl font-bold text-primary-600"},kt={class:"text-center"},ye={__name:"Create",props:{ship:Object,cards:Object,publishableKey:String,userAddresses:Object,internationalShippingMethod:Object,packingOptions:Object,userPreferences:Object,shippingPreferenceOptions:Object},setup(h){var I,M,D,T,E,B;const s=h;let S=(o,l=[])=>{if(typeof o!="string"||o.trim()==="")return l;try{return JSON.parse(o)}catch{return l}};const $=Y(),w=G({}),c=u(s!=null&&s.userPreferences?Number((I=s==null?void 0:s.userPreferences)==null?void 0:I.international_shipping_option):0),x=u(S((M=s==null?void 0:s.userPreferences)!=null&&M.packing_option?(D=s==null?void 0:s.userPreferences)==null?void 0:D.packing_option:[])),b=u(S((T=s==null?void 0:s.userPreferences)!=null&&T.shipping_preference_option?(E=s==null?void 0:s.userPreferences)==null?void 0:E.shipping_preference_option:[])),C=u(null),A=u(null),m=u(((B=s==null?void 0:s.ship)==null?void 0:B.handling_fee)||0),V=u(0),j=u(0),p=u(0);function U(o){w[o]=!w[o]}const N=()=>{var l,v;m.value=((l=s==null?void 0:s.ship)==null?void 0:l.handling_fee)||0;const o={shipMethod:c.value,packingOption:x.value,shippingPreferenceOption:b.value,shipWeight:((v=s.ship)==null?void 0:v.total_weight)||0};et.post(route("customer.shipment.calculateShippingCost"),o).then(_=>{console.log("Shipping cost calculated:",_.data);const{data:t,success:i}=_.data;i?(t!=null&&t.international_shipping_amount&&(m.value+=t==null?void 0:t.international_shipping_amount,V.value=t==null?void 0:t.international_shipping_amount),t!=null&&t.packing_option_amount&&(m.value+=t==null?void 0:t.packing_option_amount,j.value=t==null?void 0:t.packing_option_amount),t!=null&&t.shipping_preference_option_amount&&(m.value+=t==null?void 0:t.shipping_preference_option_amount,p.value=t==null?void 0:t.shipping_preference_option_amount)):$.error(_.data.message||"Error calculating shipping cost")}).catch(_=>{var t,i;$.error(((i=(t=_.response)==null?void 0:t.data)==null?void 0:i.message)||"An error occurred while calculating shipping cost")})},W=o=>{C.value=o},H=o=>{A.value=o};return Q([c,x,b],()=>{N()}),X(()=>{N()}),(o,l)=>(d(),Z(J,null,{default:O(()=>{var v,_;return[a(k(P),{title:"Shipment Checkout"}),l[25]||(l[25]=e("h1",{class:"text-2xl"},"Checkout",-1)),e("div",nt,[e("div",ot,[e("div",it,[e("div",dt,[e("p",rt," Estimated shipping cost: $"+n(m.value),1)])]),a(L,{cards:s==null?void 0:s.cards,publishableKey:h.publishableKey,onSelectedCard:W},null,8,["cards","publishableKey"]),a(q,{userAddresses:s==null?void 0:s.userAddresses,onSetSelectedAddress:H},null,8,["userAddresses"]),e("div",ut,[e("div",at,[e("table",mt,[l[12]||(l[12]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border"}," View "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border"}," Tracking Number "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border"}," Total Price "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border"}," Total Weight "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border"}," Remove ")])],-1)),s!=null&&s.ship?(d(),r("tbody",_t,[(d(!0),r(f,null,g(s.ship.packages,t=>{var i;return d(),r(f,{key:t==null?void 0:t.id},[e("tr",ct,[e("td",xt,[e("button",{onClick:Pt=>U(t.id)},[e("i",{class:tt(["fas",w[t.id]?"fa-chevron-down":"fa-chevron-right","text-primary-500"])},null,2)],8,bt)]),e("td",vt,[e("div",ft,n(t==null?void 0:t.from),1),e("div",yt,n(t==null?void 0:t.tracking_id),1)]),e("td",wt,[e("div",gt," $"+n(t==null?void 0:t.total_value),1)]),e("td",ht,[e("div",St,n(t==null?void 0:t.weight)+" lbs ",1)]),e("td",$t,[a(z,{id:(i=s==null?void 0:s.ship)==null?void 0:i.id,packageId:t==null?void 0:t.id},null,8,["id","packageId"])])]),w[t.id]?(d(),r("tr",Ct,[e("td",At,[e("div",Vt,[l[7]||(l[7]=e("h4",{class:"text-lg font-semibold mb-2"}," Package Details ",-1)),e("p",null,[l[3]||(l[3]=e("strong",null,"From:",-1)),y(" "+n(t==null?void 0:t.from),1)]),e("p",null,[l[4]||(l[4]=e("strong",null,"Tracking Number:",-1)),y(" "+n(t==null?void 0:t.tracking_id),1)]),e("p",null,[l[5]||(l[5]=e("strong",null,"Value:",-1)),y(" $"+n(t==null?void 0:t.total_value),1)]),e("p",null,[l[6]||(l[6]=e("strong",null,"Weight:",-1)),y(" "+n(t==null?void 0:t.weight)+" lbs ",1)])])])])):K("",!0)],64)}),128)),e("tr",jt,[l[9]||(l[9]=e("td",null,null,-1)),l[10]||(l[10]=e("td",{class:"px-6 py-4"},[e("strong",null,"Shipment Totals ")],-1)),e("td",null,n(o.__to_fixed_number((v=s==null?void 0:s.ship)==null?void 0:v.total_price)),1),e("td",null,[y(n(o.__to_fixed_number((_=s==null?void 0:s.ship)==null?void 0:_.total_weight))+" ",1),l[8]||(l[8]=e("span",{class:"lowercase"},"lbs",-1))]),l[11]||(l[11]=e("td",null,null,-1))])])):K("",!0)])])])]),e("div",pt,[e("div",Nt,[l[22]||(l[22]=e("h2",{class:"text-xl font-semibold mb-2"}," Shipment Details & Options ",-1)),e("div",It,[e("div",Mt,[l[13]||(l[13]=e("h3",null,"Shipment Method",-1)),e("p",Dt," $"+n(V.value),1)]),e("div",null,[e("ul",null,[(d(!0),r(f,null,g(s.internationalShippingMethod,t=>(d(),r("li",{key:t.id},[e("div",null,[e("label",{for:`international_${t==null?void 0:t.id}`},[a(R,{name:"shipping_method",modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=i=>c.value=i),value:Number(t==null?void 0:t.id),id:`international_${t==null?void 0:t.id}`},null,8,["modelValue","value","id"]),e("span",Et,n(t==null?void 0:t.title),1)],8,Tt)])]))),128))])])]),e("div",Bt,[e("div",Ft,[l[14]||(l[14]=e("h3",null,"Packing Option",-1)),e("p",Kt," $"+n(j.value),1)]),l[15]||(l[15]=e("div",null,[e("p",{class:"text-gray-600 mb-2"}," (Based on 8lbs weight) ")],-1)),e("div",null,[e("ul",null,[(d(!0),r(f,null,g(s==null?void 0:s.packingOptions,t=>(d(),r("li",{key:t==null?void 0:t.id},[e("div",null,[e("label",{for:`packing_option_${t==null?void 0:t.id}`},[a(F,{name:"packing_option",modelValue:x.value,"onUpdate:modelValue":l[1]||(l[1]=i=>x.value=i),value:Number(t==null?void 0:t.id),id:`packing_option_${t==null?void 0:t.id}`},null,8,["modelValue","value","id"]),e("span",Wt,n(t==null?void 0:t.title),1)],8,Ut)])]))),128))])])]),e("div",Ht,[e("div",Jt,[l[16]||(l[16]=e("h3",null,"Shipping Preferences",-1)),e("p",Lt," $"+n(p.value),1)]),e("div",null,[e("ul",null,[(d(!0),r(f,null,g(s==null?void 0:s.shippingPreferenceOptions,t=>(d(),r("li",{key:t==null?void 0:t.id},[e("div",null,[e("label",{for:`shipping_preference_options${t==null?void 0:t.id}`},[a(F,{name:"shipping_preference_option",modelValue:b.value,"onUpdate:modelValue":l[2]||(l[2]=i=>b.value=i),value:Number(t==null?void 0:t.id),id:`shipping_preference_option${t==null?void 0:t.id}`},null,8,["modelValue","value","id"]),e("span",zt,n(t==null?void 0:t.title),1)],8,qt)])]))),128))])])]),e("div",Rt,[l[17]||(l[17]=e("div",{class:"flex items-center justify-between mb-4"},[e("h3",null,"Export Documentation"),e("p",{class:"text-gray-600"},"$0.00")],-1)),e("div",null,[e("ul",null,[e("li",null,[e("div",null,[a(lt,{ship:s==null?void 0:s.ship},null,8,["ship"])])])])])]),l[23]||(l[23]=e("div",{class:"mb-4"},[e("div",{class:"flex items-center justify-between mb-4"},[e("h3",null,"Handling Fee"),e("p",{class:"text-gray-600"},"$10.00")])],-1)),l[24]||(l[24]=e("hr",null,null,-1)),e("div",Yt,[e("div",Gt,[e("div",Qt,[l[18]||(l[18]=e("h3",null,"Subtotal",-1)),e("p",Xt," $"+n(o.__to_fixed_number(m.value)),1)]),l[19]||(l[19]=e("div",{class:"flex items-center justify-between text-sm text-gray-600"},[e("p",null,"Package Level Charges"),e("p",null,"$0.00")],-1))]),e("div",Zt,[l[20]||(l[20]=e("h3",{class:"text-lg font-medium text-gray-800"}," Estimated Shipping Charges ",-1)),e("p",Ot," $"+n(o.__to_fixed_number(m.value)),1)]),l[21]||(l[21]=e("div",{class:"text-sm text-gray-600 mb-4 text-center"}," Your selected card will be used for this transaction. ",-1)),e("div",kt,[a(st,{ship:s==null?void 0:s.ship,selectedShipMethod:c.value,selectedPackingOption:x.value,selectedShippingPreferenceOption:b.value,checkoutAmount:m.value,selectedCardId:C.value,selectedAddressId:A.value},null,8,["ship","selectedShipMethod","selectedPackingOption","selectedShippingPreferenceOption","checkoutAmount","selectedCardId","selectedAddressId"])])])])])])]}),_:1,__:[25]}))}};export{ye as default};
