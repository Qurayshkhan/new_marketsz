import{_ as U}from"./Modal-B3AhaWax.js";import{l as q}from"./stripe.esm-Vr-Q6Y1S.js";import{_ as M}from"./PrimaryButton-zxniru5U.js";import{_ as i}from"./TextInput-phx9tQ01.js";import{_ as p}from"./InputLabel-hVZ9tBby.js";import{m as B,q as g,u as E,E as A,g as x,o as _,b as l,a as t,d as r,w as S,f as $,c as P,D as L,F,r as T,t as w}from"./app-DkUkVBZ9.js";import{_ as c}from"./InputError-B2KGQUcp.js";import{_ as h}from"./Radiobox-CsTLC71F.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={class:"grid grid-cols-2 gap-2"},j={class:"text-end"},I={__name:"Stripe",props:{stripeKey:String},emits:["submitForm"],setup(n,{emit:C}){const m=n,v=B().props.auth.user,f=m==null?void 0:m.stripeKey,b=g(null),d=g(null),s=E({token:null,card_holder_name:v==null?void 0:v.name,address_line1:"",address_line2:"",country:"",state:"",city:"",postal_code:"",country_code:"",phone_number:""});g(null);const y=g(null),a=g(null),u=g(null),V=C,K=async()=>{b.value=await q(f),d.value=b.value.elements(),y.value=d.value.create("cardNumber"),y.value.mount("#card-number"),a.value=d.value.create("cardExpiry"),a.value.mount("#card-expiry"),u.value=d.value.create("cardCvc"),u.value.mount("#card-cvc")},N=async()=>{const{token:k,error:e}=await b.value.createToken(y.value);e?document.getElementById("card-error").textContent=e.message:(document.getElementById("card-error").textContent="",s.token=k,V("submitForm",{form:s}))};return A(()=>{K()}),(k,e)=>(_(),x("div",null,[e[13]||(e[13]=l("p",null,"Please enter all information.",-1)),l("div",null,[e[10]||(e[10]=l("p",{class:"text-gray-500"}," Card Holder Name (First Name and Last Name as appears on the card) * ",-1)),t(i,{modelValue:r(s).card_holder_name,"onUpdate:modelValue":e[0]||(e[0]=o=>r(s).card_holder_name=o)},null,8,["modelValue"])]),e[14]||(e[14]=l("label",null,"Card Number",-1)),e[15]||(e[15]=l("div",{id:"card-number",class:"p-2 border rounded mb-2"},null,-1)),e[16]||(e[16]=l("label",null,"Card Expiry",-1)),e[17]||(e[17]=l("div",{id:"card-expiry",class:"p-2 border rounded mb-2"},null,-1)),e[18]||(e[18]=l("label",null,"Card CVC",-1)),e[19]||(e[19]=l("div",{id:"card-cvc",class:"p-2 border rounded mb-2"},null,-1)),e[20]||(e[20]=l("div",{id:"card-error",class:"text-red-500 text-sm mt-2"},null,-1)),l("div",null,[e[11]||(e[11]=l("p",null,"Billing Address",-1)),l("div",D,[l("div",null,[t(p,{value:"Full Name*"}),t(i,{modelValue:r(s).card_holder_name,"onUpdate:modelValue":e[1]||(e[1]=o=>r(s).card_holder_name=o),required:""},null,8,["modelValue"]),t(c,{message:r(s).errors.card_holder_name,class:"mt-1"},null,8,["message"])]),l("div",null,[t(p,{value:"Address Line 1*"}),t(i,{modelValue:r(s).address_line1,"onUpdate:modelValue":e[2]||(e[2]=o=>r(s).address_line1=o),required:""},null,8,["modelValue"]),t(c,{message:r(s).errors.address_line1,class:"mt-1"},null,8,["message"])]),l("div",null,[t(p,{value:"Address Line 2"}),t(i,{modelValue:r(s).address_line2,"onUpdate:modelValue":e[3]||(e[3]=o=>r(s).address_line2=o)},null,8,["modelValue"]),t(c,{message:r(s).errors.address_line2,class:"mt-1"},null,8,["message"])]),l("div",null,[t(p,{value:"Country*"}),t(i,{modelValue:r(s).country,"onUpdate:modelValue":e[4]||(e[4]=o=>r(s).country=o),required:""},null,8,["modelValue"]),t(c,{message:r(s).errors.country,class:"mt-1"},null,8,["message"])]),l("div",null,[t(p,{value:"State or Province*"}),t(i,{modelValue:r(s).state,"onUpdate:modelValue":e[5]||(e[5]=o=>r(s).state=o),required:""},null,8,["modelValue"]),t(c,{message:r(s).errors.state,class:"mt-1"},null,8,["message"])]),l("div",null,[t(p,{value:"City or Town*"}),t(i,{modelValue:r(s).city,"onUpdate:modelValue":e[6]||(e[6]=o=>r(s).city=o),required:""},null,8,["modelValue"]),t(c,{message:r(s).errors.city,class:"mt-1"},null,8,["message"])]),l("div",null,[t(p,{value:"Postal Code"}),t(i,{modelValue:r(s).postal_code,"onUpdate:modelValue":e[7]||(e[7]=o=>r(s).postal_code=o)},null,8,["modelValue"]),t(c,{message:r(s).errors.postal_code,class:"mt-1"},null,8,["message"])]),l("div",null,[t(p,{value:"Country Code*"}),t(i,{modelValue:r(s).country_code,"onUpdate:modelValue":e[8]||(e[8]=o=>r(s).country_code=o),required:""},null,8,["modelValue"]),t(c,{message:r(s).errors.country_code,class:"mt-1"},null,8,["message"])]),l("div",null,[t(p,{value:"Phone Number*"}),t(i,{modelValue:r(s).phone_number,"onUpdate:modelValue":e[9]||(e[9]=o=>r(s).phone_number=o),required:""},null,8,["modelValue"]),t(c,{message:r(s).errors.phone_number,class:"mt-1"},null,8,["message"])])])]),l("div",j,[t(M,{id:"custom-button",onClick:N,processing:r(s).processing},{default:S(()=>e[12]||(e[12]=[$(" Save this information ")])),_:1,__:[12]},8,["processing"])])]))}},H={class:"p-3 mx-3 space-y-6 text-black"},z={class:"flex items-center justify-between"},G={__name:"AddCardModal",props:{publishableKey:String,isShowCardModal:{type:Boolean,default:!1},closeCardModal:{type:Function,required:!0}},emits:["submitForm"],setup(n,{emit:C}){const m=n,v=C,f=b=>{v("submitForm",b)};return(b,d)=>(_(),P(U,{show:n.isShowCardModal,onClose:n.closeCardModal},{default:S(()=>[l("div",H,[l("div",z,[d[1]||(d[1]=l("h2",{class:"text-xl font-semibold text-gray-800"},"Add Card",-1)),l("button",{onClick:d[0]||(d[0]=(...s)=>n.closeCardModal&&n.closeCardModal(...s)),class:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none"}," Ã— ")]),l("div",null,[t(I,{stripeKey:m.publishableKey,onSubmitForm:f},null,8,["stripeKey"])])])]),_:1},8,["show","onClose"]))}},J={class:"flex justify-between items-center mb-4"},O={class:"flex items-start gap-4"},Q=["for"],R={class:"flex flex-col"},W={class:"flex items-center gap-2 text-sm font-medium text-gray-700"},X={class:"text-gray-900"},Y={class:"text-gray-500 tracking-widest"},Z={class:"text-sm text-gray-500"},ue={__name:"CreditCard",props:{cards:{type:Array,required:!0},publishableKey:String},emits:["update:selected"],setup(n,{emit:C}){const m=g(!1),v=()=>{m.value=!0},f=()=>{m.value=!1},b=C,d=g(null);L(d,y=>{b("update:selected",y)});const s=y=>{try{const{form:a}=y;console.log("ðŸš€ ~ submitForm ~ form:",a),a.post(route("customer.card.add"),{preserveState:!0,preserveScroll:!0,replace:!0}),f()}catch(a){toast.error(a)}};return(y,a)=>(_(),x(F,null,[l("div",J,[a[2]||(a[2]=l("div",null,[l("p",null,"Debit & Credit Cards"),l("p",null,"Chose your card for checkout")],-1)),t(M,{class:"bg-primary-500",onClick:v},{default:S(()=>a[1]||(a[1]=[$("+Add Card")])),_:1,__:[1]})]),l("ul",null,[(_(!0),x(F,null,T(n.cards,u=>(_(),x("li",{key:u.id,class:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow transition mb-4"},[l("div",O,[t(h,{name:"payment_card",modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=V=>d.value=V),value:u.id,id:u.id},null,8,["modelValue","value","id"]),l("label",{for:u.id,class:"cursor-pointer"},[l("div",R,[l("div",W,[l("p",X,w(u.brand),1),l("p",Y," **** **** **** "+w(u.last4),1)]),l("p",Z,w(u.address_line1),1)])],8,Q)])]))),128))]),t(G,{publishableKey:n.publishableKey,isShowCardModal:m.value,showCardModal:v,closeCardModal:f,onSubmitForm:s},null,8,["publishableKey","isShowCardModal"])],64))}};export{ue as default};
