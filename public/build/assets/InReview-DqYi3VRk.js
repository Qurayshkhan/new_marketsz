import{B as z,s as i,g as d,o as u,a as c,w as x,b as t,n as R,F as h,r as _,d as F,t as a,T as q,i as w,f as v,e as E,C as N}from"./app-CYe__-9x.js";import G from"./Report-1EpBxVX8.js";import{_ as L}from"./TextInput-DzZwOteH.js";import{D as O,_ as W}from"./Modal-B-YzzRqh.js";import{C as Q}from"./CurrencyDollarText-CNEPlGaL.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AuthenticatedLayout-DbgW2ebg.js";const J={class:"grid grid-cols-12 gap-4"},K={class:"col-span-9"},X={class:"w-full border text-center data-table text-sm"},Y={class:"uppercase bg-gray-100"},Z=["onClick"],tt={key:0,class:"bg-gray-50"},st={colspan:"6",class:"text-left px-5"},et={class:"w-full my-5"},lt={class:"flex items-center justify-between"},at={class:"flex flex-col items-start"},ot=["onClick"],nt={class:"text-lg"},dt={class:"text-md text-gray-600"},ut={key:0,class:"text-sm"},rt={colspan:"6"},it={class:"flex items-center justify-between"},ct={colspan:"5"},pt={class:"my-2 w-full"},gt={key:0},ft={class:"my-2 flex gap-2 items-center"},ht={class:""},vt={class:"text-red-500"},yt={class:"col-span-3 bg-gray-50 p-4 rounded"},kt={class:"p-6 space-y-4"},bt={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},xt=["src"],Ct={key:1,class:"text-center text-gray-900"},mt={__name:"InReview",props:{inReviews:Object,specialRequests:Object,packageCounts:Array},setup(V){const o=V,C=z(),y=o.inReviews,r=i(new Set),k=i(!1),U=i(!1),m=i(!1),p=i(null),j=i([]),b=i([]),$=n=>{r.value.has(n)?r.value.delete(n):r.value.add(n)},A=()=>{r.value.size===y.length?r.value.clear():r.value=new Set(y.map(n=>n.id))},B=()=>r.value.size===y.length,P=()=>{k.value=!k.value},S=()=>{U.value=!1,m.value=!1,j.value=[],b.value=[]},I=async(n,s)=>{n.preventDefault();try{const g=await N.post(route("customer.packageAddNote"),{note:p.value,id:s});k.value=!1,C.success(g.data.message)}catch{C.error(response.data.message)}},M=async n=>{try{const s=await N.get(route("customers.packageGetPhotos",{package_id:n}));b.value=s.data.data||[],m.value=!0}catch{C.error("Failed to fetch photos")}};return(n,s)=>{var g,T,D;return u(),d(h,null,[c(G,{actionCount:o==null?void 0:o.packageCounts.action_required,inReviewCount:(g=o==null?void 0:o.packageCounts)==null?void 0:g.in_review,readyToSendCount:(T=o==null?void 0:o.packageCounts)==null?void 0:T.ready_to_send,allPackagesCount:(D=o==null?void 0:o.packageCounts)==null?void 0:D.all},{default:x(()=>[t("div",J,[t("div",K,[t("table",X,[t("thead",Y,[t("tr",null,[t("th",null,[t("i",{onClick:A,class:R(["cursor-pointer",["fa-solid",B()?"fa-angles-down":"fa-angles-right","text-primary-500"]])},null,2)]),s[3]||(s[3]=t("th",null,"From",-1)),s[4]||(s[4]=t("th",null,"Package ID",-1)),s[5]||(s[5]=t("th",null,"Date Received",-1)),s[6]||(s[6]=t("th",null,"Total value",-1)),s[7]||(s[7]=t("th",null,"Total weight",-1))])]),t("tbody",null,[(u(!0),d(h,null,_(F(y),l=>(u(),d(h,{key:l.id},[t("tr",null,[t("td",{onClick:f=>$(l.id),class:"cursor-pointer"},[t("i",{class:R(["fas",r.value.has(l.id)?"fa-chevron-down":"fa-chevron-right","text-primary-500"])},null,2)],8,Z),t("td",null,a(l.from),1),t("td",null,a(l.package_id),1),t("td",null,a(n.__format_date_time(l.date_received)),1),t("td",null,a(n.__to_fixed_number(l.total_value))+" USD ",1),t("td",null,a(l.weight)+" lbs",1)]),c(q,{name:"fade"},{default:x(()=>{var f;return[r.value.has(l.id)?(u(),d("tr",tt,[t("td",st,[s[19]||(s[19]=t("div",null,[t("strong",{class:"bold"},"Why is this package in review?"),t("br"),t("p",{class:"text-sm text-white bg-[#f19445] uppercase px-2 inline-block"}," Dangerous Goods "),t("p",{class:"py-1"}," We are reviewing your package and will email you if it is not ready to send within two business days. "),t("hr")],-1)),t("table",et,[t("thead",null,[t("th",null,[t("div",lt,[t("div",at,[s[8]||(s[8]=t("p",null," Package Details ",-1)),t("p",null," To: "+a((f=l==null?void 0:l.customer)==null?void 0:f.name),1)]),t("div",null,[t("button",{class:"btn bg-white text-black",onClick:e=>M(l.id)}," Photo ",8,ot)])])]),s[9]||(s[9]=t("th",null,"Qty",-1)),s[10]||(s[10]=t("th",null,"Value Per Unit (USD)",-1)),s[11]||(s[11]=t("th",null,"Total Line Value (USD)",-1))]),t("tbody",null,[(u(!0),d(h,null,_(l.items,e=>(u(),d("tr",{key:e.id,class:"border bg-[#e8e7e7]"},[t("td",null,[t("p",nt,a(e==null?void 0:e.title),1),t("p",dt,a(e==null?void 0:e.description),1),e!=null&&e.item_note?(u(),d("p",ut,a(e==null?void 0:e.item_note),1)):w("",!0)]),t("td",null,a(e==null?void 0:e.quantity),1),t("td",null,a(e==null?void 0:e.value_per_unit),1),t("td",null,a(e==null?void 0:e.total_line_value),1)]))),128)),t("tr",null,[t("td",rt,[t("div",it,[t("p",null,[s[12]||(s[12]=t("span",{class:"uppercase"},"Total weight: ",-1)),v(a(l==null?void 0:l.weight)+" lbs ",1)]),t("p",null,[s[13]||(s[13]=t("span",{class:"uppercase"},"Total value of this package: ",-1)),v(a(l.total_value)+" USD ",1)])])])]),s[18]||(s[18]=t("tr",null,[t("td",{colspan:"6",class:"text-gray-500"}," **Values shown are obtained from the merchant invoices, when available. Researched values based on current market prices have been provided above for any items that arrived without invoices. The value should be updated to reflect the actual price paid for each item, and must be confirmed. ")],-1)),t("tr",null,[t("td",ct,[t("div",pt,[t("a",{onClick:s[0]||(s[0]=e=>P()),href:"#",class:"text-red-700"},"Add your notes"),s[14]||(s[14]=v(" to this package, this is for your use only, Marketsz will not review this area. "))]),k.value?(u(),d("div",gt,[c(L,{class:"w-full",placeholder:"Please add note here",modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=e=>p.value=e)},null,8,["modelValue"]),t("div",ft,[c(O,{onClick:E(e=>I(e,l.id),["prevent"])},{default:x(()=>s[15]||(s[15]=[v(" Save your note ")])),_:2,__:[15]},1032,["onClick"]),t("a",{onClick:s[2]||(s[2]=e=>P()),href:"javascript:void(0)"},"Cancel")])])):w("",!0),t("p",ht,[s[16]||(s[16]=v(" Note: ")),t("span",vt,a(p.value?p.value:l==null?void 0:l.note),1)]),s[17]||(s[17]=t("hr",null,null,-1))])])])])])])):w("",!0)]}),_:2},1024)],64))),128))])])]),t("div",yt,[c(Q)])])]),_:1},8,["actionCount","inReviewCount","readyToSendCount","allPackagesCount"]),c(W,{show:m.value,onClose:S},{default:x(()=>[t("div",kt,[t("div",{class:"flex justify-between items-center"},[s[20]||(s[20]=t("h2",{class:"text-lg font-semibold text-gray-900"}," Package Photos ",-1)),t("button",{onClick:S,class:"text-gray-500 hover:text-gray-800"}," Close ")]),b.value.length>0?(u(),d("div",bt,[(u(!0),d(h,null,_(b.value,(l,f)=>(u(),d("img",{key:f,src:l.file_with_url,alt:"Package Photo",class:"rounded shadow border"},null,8,xt))),128))])):(u(),d("div",Ct,s[21]||(s[21]=[t("h3",null,"No photos available",-1)])))])]),_:1},8,["show"])],64)}}},Nt=H(mt,[["__scopeId","data-v-f04deb05"]]);export{Nt as default};
