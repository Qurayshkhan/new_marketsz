import{C as D,q as _,g as r,o as m,a as i,d as M,h as j,w as x,b as s,f as n,F as y,r as A,i as g,t as o,y as C}from"./app-tNukZLC0.js";import F from"./Edit-B-YpZGGa.js";import{_ as K}from"./PrimaryButton-jCyjNUTo.js";import{_ as N}from"./Modal-Be_rDyjP.js";import V from"./Stripe-CaFkjSoH.js";import B from"./CardEditModal-yAq82uZh.js";import"./NavLink-INMiTklO.js";import"./AuthenticatedLayout-D0ccqowf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./stripe.esm-Vr-Q6Y1S.js";import"./TextInput-Bm1iwXcL.js";import"./InputLabel-BSnjTFKa.js";import"./InputError-CAIu3hI0.js";const P={class:"text-end"},T={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6"},q={class:"flex justify-between items-center"},H={class:"text-gray-700 font-semibold"},L={key:0,class:"text-xs bg-green-100 text-green-800 font-bold px-2 py-1 rounded-full"},O={class:"text-sm text-gray-600"},z={class:"ml-2"},G={class:"flex justify-between items-center pt-3 border-t mt-3"},I=["onClick"],J={class:"space-x-3"},Q=["onClick"],R=["onClick"],U={class:"p-3 mx-3 space-y-6 text-black"},re={__name:"PaymentMethod",props:{publishableKey:String,cards:Object},setup(h){const u=D(),d=h,f=_(!1),k=()=>{f.value=!0},p=()=>{f.value=!1},w=l=>{try{const{form:t}=l;t.post(route("customer.card.add"),{preserveState:!0,preserveScroll:!0,replace:!0}),p()}catch(t){u.error(t)}},$=l=>{C.put(route("customer.card.setDefault",l),{},{onSuccess:()=>u.success("Default card updated"),onError:t=>u.error(t.message||"Error setting default")})},v=_(null),a=_(!1),S=l=>{v.value=l,a.value=!0},E=l=>{confirm("Are you sure you want to delete this card?")&&C.delete(route("customer.card.delete",l),{onSuccess:()=>u.success("Card deleted"),onError:t=>u.error(t.message||"Error deleting card")})};return(l,t)=>(m(),r(y,null,[i(M(j),{title:"Payments"}),i(F,null,{default:x(()=>[s("div",P,[i(K,{onClick:t[0]||(t[0]=e=>k())},{default:x(()=>t[2]||(t[2]=[n("+ Add card")])),_:1,__:[2]})]),s("div",T,[(m(!0),r(y,null,A(d==null?void 0:d.cards,e=>(m(),r("div",{key:e==null?void 0:e.id,class:"relative bg-white border shadow rounded-xl p-5 space-y-3"},[s("div",q,[s("div",H,o(e==null?void 0:e.brand)+" **** **** **** "+o(e==null?void 0:e.last4),1),e!=null&&e.is_default?(m(),r("div",L," Default ")):g("",!0)]),s("div",O,[s("p",null,[t[3]||(t[3]=s("strong",null,"Card Holder:",-1)),n(" "+o(e.card_holder_name),1)]),s("p",null,[t[4]||(t[4]=s("strong",null,"Expiry:",-1)),n(" "+o(e==null?void 0:e.exp_month)+"/"+o(e==null?void 0:e.exp_year),1)]),s("p",null,[t[5]||(t[5]=s("strong",null,"Phone:",-1)),n(" "+o(e==null?void 0:e.phone_number),1)]),t[9]||(t[9]=s("p",null,[s("strong",null,"Address:")],-1)),s("p",z,[n(o(e==null?void 0:e.address_line1),1),t[6]||(t[6]=s("br",null,null,-1)),n(" "+o(e==null?void 0:e.address_line2),1),t[7]||(t[7]=s("br",null,null,-1)),n(" "+o(e==null?void 0:e.city)+", "+o(e==null?void 0:e.state)+", "+o(e==null?void 0:e.postal_code),1),t[8]||(t[8]=s("br",null,null,-1)),n(" "+o(e==null?void 0:e.country)+" ("+o(e==null?void 0:e.country_code)+") ",1)])]),s("div",G,[e.is_default?g("",!0):(m(),r("button",{key:0,class:"text-blue-600 hover:underline text-sm",onClick:b=>$(e.id)}," Set as Default ",8,I)),s("div",J,[s("button",{onClick:b=>S(e),class:"text-blue-500 hover:underline"}," Edit ",8,Q),s("button",{class:"text-red-600 hover:underline text-sm",onClick:b=>E(e.id)}," Delete ",8,R)])])]))),128))]),i(B,{card:v.value,show:a.value,onClose:t[1]||(t[1]=e=>a.value=!1)},null,8,["card","show"])]),_:1}),i(N,{show:f.value,onClose:p},{default:x(()=>[s("div",U,[s("div",{class:"flex items-center justify-between"},[t[10]||(t[10]=s("h2",{class:"text-xl font-semibold text-gray-800"},"Add Card",-1)),s("button",{onClick:p,class:"text-gray-500 hover:text-gray-700 text-2xl font-bold leading-none"}," Ã— ")]),s("div",null,[i(V,{stripeKey:d.publishableKey,onSubmitForm:w},null,8,["stripeKey"])])])]),_:1},8,["show"])],64))}};export{re as default};
