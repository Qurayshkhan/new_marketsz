import{q as y,D as S,u as U,g as p,o as _,b as n,a as d,w as c,f as g,i as N,t as r,F as b,r as j,d as o,e as F}from"./app-CRJw1_yN.js";import{_ as f}from"./InputError-BsaDdDa_.js";import{_ as B}from"./Modal-BpwAAdZ_.js";import{_ as w}from"./PrimaryButton-Duzn4CoT.js";import{_ as E}from"./SecondaryButton-D2NzZwqZ.js";import{_ as a}from"./TextInput-B5LQaouI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"mb-4 flex justify-between items-center mt-2"},M={class:"relative w-full"},D={key:0,class:"absolute mt-1 bg-white border rounded-lg shadow-lg w-full max-h-60 overflow-y-auto z-50"},O=["onClick"],P={class:"font-medium"},q={class:"text-sm text-gray-500"},z={class:"text-xs text-gray-400"},T={class:"p-6"},G={class:"text-xl font-semibold mb-4 text-black"},H={class:"grid grid-cols-2 gap-2"},I={class:"mt-4 flex justify-end gap-2"},ee={__name:"ShipAddress",props:{userAddresses:Array},emits:["setSelectedAddress"],setup(A,{emit:x}){const v=A,C=x,u=y(!1),i=y(null),m=y(!1);S(i,t=>{C("setSelectedAddress",t)});const l=U({id:null,address_name:"",full_name:"",address_line_1:"",address_line_2:"",country:"",state:"",city:"",postal_code:"",country_code:"",phone_number:""}),V=()=>{l.reset(),l.clearErrors(),l.id=null},$=(t=null)=>{V(),t&&Object.assign(l,{id:t.id,address_name:t.address_name||"",full_name:t.full_name||"",address_line_1:t.address_line_1||"",address_line_2:t.address_line_2||"",country:t.country||"",state:t.state||"",city:t.city||"",postal_code:t.postal_code||"",country_code:t.country_code||"",phone_number:t.phone_number||""}),u.value=!0},h=()=>{const t=l.id!==null,e=t?route("customer.addresses.update",{address:l.id}):route("customer.addresses.store");(t?l.put:l.post)(e,{preserveScroll:!0,onSuccess:()=>{u.value=!1,V()}})},k=t=>`${t.full_name}, ${t.address_line_1}, ${t.city||""}, ${t.country}`;return(t,e)=>(_(),p(b,null,[n("div",L,[e[15]||(e[15]=n("div",null,[n("p",null,"Shipping Address"),n("p",null,"Choose your address for shipping")],-1)),d(w,{onClick:e[0]||(e[0]=s=>$())},{default:c(()=>e[14]||(e[14]=[g("+ Add New Address")])),_:1,__:[14]})]),n("div",M,[n("div",{class:"bg-white border rounded-lg p-4 flex justify-between items-center cursor-pointer shadow-sm",onClick:e[1]||(e[1]=s=>m.value=!m.value)},[n("span",null,r(i.value?k(v.userAddresses.find(s=>s.id===i.value)):"Select a shipping address"),1),e[16]||(e[16]=n("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))]),m.value?(_(),p("ul",D,[(_(!0),p(b,null,j(v.userAddresses,s=>(_(),p("li",{key:s.id,onClick:J=>{i.value=s.id,m.value=!1},class:"p-3 hover:bg-gray-100 cursor-pointer"},[n("p",P,r(s.full_name),1),n("p",q,r(s.address_line_1),1),n("p",z,r(s.country)+" "+r(s.state?`, ${s.state}`:"")+" "+r(s.city?`, ${s.city}`:""),1)],8,O))),128))])):N("",!0)]),d(B,{show:u.value,onClose:e[13]||(e[13]=s=>u.value=!1)},{default:c(()=>[n("div",T,[n("h2",G,r(o(l).id?"Edit Address":"Add New Address"),1),n("form",{onSubmit:F(h,["prevent"]),class:"grid gap-3"},[d(a,{modelValue:o(l).address_name,"onUpdate:modelValue":e[2]||(e[2]=s=>o(l).address_name=s),placeholder:"Address Name *"},null,8,["modelValue"]),d(f,{message:o(l).errors.address_name,class:"mt-1"},null,8,["message"]),d(a,{modelValue:o(l).full_name,"onUpdate:modelValue":e[3]||(e[3]=s=>o(l).full_name=s),placeholder:"Full Name *"},null,8,["modelValue"]),d(f,{message:o(l).errors.full_name,class:"mt-1"},null,8,["message"]),d(a,{modelValue:o(l).address_line_1,"onUpdate:modelValue":e[4]||(e[4]=s=>o(l).address_line_1=s),placeholder:"Address Line 1 *"},null,8,["modelValue"]),d(f,{message:o(l).errors.address_line_1,class:"mt-1"},null,8,["message"]),d(a,{modelValue:o(l).address_line_2,"onUpdate:modelValue":e[5]||(e[5]=s=>o(l).address_line_2=s),placeholder:"Address Line 2"},null,8,["modelValue"]),n("div",H,[d(a,{modelValue:o(l).country,"onUpdate:modelValue":e[6]||(e[6]=s=>o(l).country=s),placeholder:"Country *"},null,8,["modelValue"]),d(a,{modelValue:o(l).state,"onUpdate:modelValue":e[7]||(e[7]=s=>o(l).state=s),placeholder:"State"},null,8,["modelValue"]),d(a,{modelValue:o(l).city,"onUpdate:modelValue":e[8]||(e[8]=s=>o(l).city=s),placeholder:"City *"},null,8,["modelValue"]),d(f,{message:o(l).errors.city,class:"mt-1"},null,8,["message"]),d(a,{modelValue:o(l).postal_code,"onUpdate:modelValue":e[9]||(e[9]=s=>o(l).postal_code=s),placeholder:"Postal Code *"},null,8,["modelValue"]),d(a,{modelValue:o(l).country_code,"onUpdate:modelValue":e[10]||(e[10]=s=>o(l).country_code=s),placeholder:"Country Code *"},null,8,["modelValue"]),d(a,{modelValue:o(l).phone_number,"onUpdate:modelValue":e[11]||(e[11]=s=>o(l).phone_number=s),placeholder:"Phone Number *"},null,8,["modelValue"])]),n("div",I,[d(E,{type:"button",onClick:e[12]||(e[12]=s=>u.value=!1)},{default:c(()=>e[17]||(e[17]=[g(" Cancel ")])),_:1,__:[17]}),d(w,{type:"submit",disabled:o(l).processing},{default:c(()=>[g(r(o(l).processing?"Saving...":o(l).id?"Update":"Save"),1)]),_:1},8,["disabled"])])],32)])]),_:1},8,["show"])],64))}};export{ee as default};
