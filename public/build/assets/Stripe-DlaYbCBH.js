import{P as U}from"./PrimaryButton-DSCnxH2T.js";import{_ as i}from"./TextInput-BR1reG-C.js";import{_ as p}from"./InputLabel-smHxXx3t.js";import{m as q,q as f,u as B,C as L,g as T,o as j,b as t,a as n,d as l,w as A,f as F}from"./app-qXF5WJV-.js";import{_ as v}from"./InputError-RfIGFfK4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";var C="https://js.stripe.com/v3",k=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/;var I=function(){for(var d=document.querySelectorAll('script[src^="'.concat(C,'"]')),o=0;o<d.length;o++){var a=d[o];if(k.test(a.src))return a}return null},$=function(d){var o="",a=document.createElement("script");a.src="".concat(C).concat(o);var u=document.head||document.body;if(!u)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return u.appendChild(a),a},R=function(d,o){!d||!d._registerWrapper||d._registerWrapper({name:"stripe-js",version:"1.54.2",startTime:o})},y=null,W=function(d){return y!==null||(y=new Promise(function(o,a){if(typeof window>"u"||typeof document>"u"){o(null);return}if(window.Stripe){o(window.Stripe);return}try{var u=I();u&&d||u||(u=$(d)),u.addEventListener("load",function(){window.Stripe?o(window.Stripe):a(new Error("Stripe.js not available"))}),u.addEventListener("error",function(){a(new Error("Failed to load Stripe.js"))})}catch(c){a(c);return}})),y},G=function(d,o,a){if(d===null)return null;var u=d.apply(void 0,o);return R(u,a),u},x=Promise.resolve().then(function(){return W(null)}),E=!1;x.catch(function(m){E||console.warn(m)});var K=function(){for(var d=arguments.length,o=new Array(d),a=0;a<d;a++)o[a]=arguments[a];E=!0;var u=Date.now();return x.then(function(c){return G(c,o,u)})};const M={class:"grid grid-cols-2 gap-2"},X={class:"text-end"},Y={__name:"Stripe",props:{stripeKey:String},emits:["submitForm"],setup(m,{emit:d}){const o=m,a=q().props.auth.user,u=o==null?void 0:o.stripeKey,c=f(null),g=f(null),r=B({token:null,card_holder_name:a==null?void 0:a.name,address_line1:"",address_line2:"",country:"",state:"",city:"",postal_code:"",country_code:"",phone_number:""});f(null);const V=f(null),b=f(null),S=f(null),_=d,P=async()=>{c.value=await K(u),g.value=c.value.elements(),V.value=g.value.create("cardNumber"),V.value.mount("#card-number"),b.value=g.value.create("cardExpiry"),b.value.mount("#card-expiry"),S.value=g.value.create("cardCvc"),S.value.mount("#card-cvc")},N=async()=>{const{token:w,error:e}=await c.value.createToken(V.value);e?document.getElementById("card-error").textContent=e.message:(document.getElementById("card-error").textContent="",r.token=w,_("submitForm",{form:r}))};return L(()=>{P()}),(w,e)=>(j(),T("div",null,[e[13]||(e[13]=t("p",null,"Please enter all information.",-1)),t("div",null,[e[10]||(e[10]=t("p",{class:"text-gray-500"}," Card Holder Name (First Name and Last Name as appears on the card) * ",-1)),n(i,{modelValue:l(r).card_holder_name,"onUpdate:modelValue":e[0]||(e[0]=s=>l(r).card_holder_name=s)},null,8,["modelValue"])]),e[14]||(e[14]=t("label",null,"Card Number",-1)),e[15]||(e[15]=t("div",{id:"card-number",class:"p-2 border rounded mb-2"},null,-1)),e[16]||(e[16]=t("label",null,"Card Expiry",-1)),e[17]||(e[17]=t("div",{id:"card-expiry",class:"p-2 border rounded mb-2"},null,-1)),e[18]||(e[18]=t("label",null,"Card CVC",-1)),e[19]||(e[19]=t("div",{id:"card-cvc",class:"p-2 border rounded mb-2"},null,-1)),e[20]||(e[20]=t("div",{id:"card-error",class:"text-red-500 text-sm mt-2"},null,-1)),t("div",null,[e[11]||(e[11]=t("p",null,"Billing Address",-1)),t("div",M,[t("div",null,[n(p,{value:"Full Name*"}),n(i,{modelValue:l(r).card_holder_name,"onUpdate:modelValue":e[1]||(e[1]=s=>l(r).card_holder_name=s),required:""},null,8,["modelValue"]),n(v,{message:l(r).errors.card_holder_name,class:"mt-1"},null,8,["message"])]),t("div",null,[n(p,{value:"Address Line 1*"}),n(i,{modelValue:l(r).address_line1,"onUpdate:modelValue":e[2]||(e[2]=s=>l(r).address_line1=s),required:""},null,8,["modelValue"]),n(v,{message:l(r).errors.address_line1,class:"mt-1"},null,8,["message"])]),t("div",null,[n(p,{value:"Address Line 2"}),n(i,{modelValue:l(r).address_line2,"onUpdate:modelValue":e[3]||(e[3]=s=>l(r).address_line2=s)},null,8,["modelValue"]),n(v,{message:l(r).errors.address_line2,class:"mt-1"},null,8,["message"])]),t("div",null,[n(p,{value:"Country*"}),n(i,{modelValue:l(r).country,"onUpdate:modelValue":e[4]||(e[4]=s=>l(r).country=s),required:""},null,8,["modelValue"]),n(v,{message:l(r).errors.country,class:"mt-1"},null,8,["message"])]),t("div",null,[n(p,{value:"State or Province*"}),n(i,{modelValue:l(r).state,"onUpdate:modelValue":e[5]||(e[5]=s=>l(r).state=s),required:""},null,8,["modelValue"]),n(v,{message:l(r).errors.state,class:"mt-1"},null,8,["message"])]),t("div",null,[n(p,{value:"City or Town*"}),n(i,{modelValue:l(r).city,"onUpdate:modelValue":e[6]||(e[6]=s=>l(r).city=s),required:""},null,8,["modelValue"]),n(v,{message:l(r).errors.city,class:"mt-1"},null,8,["message"])]),t("div",null,[n(p,{value:"Postal Code"}),n(i,{modelValue:l(r).postal_code,"onUpdate:modelValue":e[7]||(e[7]=s=>l(r).postal_code=s)},null,8,["modelValue"]),n(v,{message:l(r).errors.postal_code,class:"mt-1"},null,8,["message"])]),t("div",null,[n(p,{value:"Country Code*"}),n(i,{modelValue:l(r).country_code,"onUpdate:modelValue":e[8]||(e[8]=s=>l(r).country_code=s),required:""},null,8,["modelValue"]),n(v,{message:l(r).errors.country_code,class:"mt-1"},null,8,["message"])]),t("div",null,[n(p,{value:"Phone Number*"}),n(i,{modelValue:l(r).phone_number,"onUpdate:modelValue":e[9]||(e[9]=s=>l(r).phone_number=s),required:""},null,8,["modelValue"]),n(v,{message:l(r).errors.phone_number,class:"mt-1"},null,8,["message"])])])]),t("div",X,[n(U,{id:"custom-button",onClick:N,disabled:l(r).processing},{default:A(()=>e[12]||(e[12]=[F(" Save this information ")])),_:1,__:[12]},8,["disabled"])])]))}};export{Y as default};
